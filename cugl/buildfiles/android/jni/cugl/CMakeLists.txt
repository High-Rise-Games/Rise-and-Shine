# PROJECT CMAKE FILE
# This file is autogenerated by the creator script
cmake_minimum_required(VERSION 3.10)
if(POLICY CMP0077)
	set(CMAKE_POLICY_DEFAULT_CMP0077 NEW)
endif()

# set the project name and version
project(cugl VERSION 2.5)

# specify the C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)
set(BUILD_SHARED_LIBS OFF)

# Set up the directories
set(CUGL_DIR  "${PROJECT_SOURCE_DIR}/../../../..")
set(BOX2_DIR  "${CUGL_DIR}/external/box2d")
set(POLY2_DIR "${CUGL_DIR}/external/poly2tri")
set(WRTC_DIR  "${CUGL_DIR}/external/libdatachannel")
list(APPEND EXTRA_INCLUDES "${CUGL_DIR}/include")
list(APPEND EXTRA_INCLUDES "${CUGL_DIR}/sdlapp/include")

# Link in box2d
add_subdirectory("${CUGL_DIR}/buildfiles/cmake/external/box2d" "box2d.dir")
list(APPEND EXTRA_LIBS box2d)
list(APPEND EXTRA_INCLUDES "${BOX2_DIR}/include")

# Link in poly2tri
add_subdirectory("${CUGL_DIR}/buildfiles/cmake/external/poly2tri" "poly2tri.dir")
list(APPEND EXTRA_LIBS poly2tri)
list(APPEND EXTRA_INCLUDES "${POLY2_DIR}")

# Link in libdatachannel
add_subdirectory("${CUGL_DIR}/buildfiles/cmake/external/libdatachannel" "libdatachannel.dir")
list(APPEND EXTRA_LIBS datachannel)
list(APPEND EXTRA_INCLUDES "${WRTC_DIR}/include")

# Add the source code
file(GLOB SOURCE_FILES
  ${CUGL_DIR}/source/base/*.cpp
  ${CUGL_DIR}/source/util/*.cpp
  ${CUGL_DIR}/source/math/*.cpp
  ${CUGL_DIR}/source/math/polygon/*.cpp
  ${CUGL_DIR}/source/input/*.cpp
  ${CUGL_DIR}/source/input/gestures/*.cpp
  ${CUGL_DIR}/source/io/*.cpp
  ${CUGL_DIR}/source/assets/*.cpp
  ${CUGL_DIR}/source/audio/*.cpp
  ${CUGL_DIR}/source/audio/graph/*.cpp
  ${CUGL_DIR}/source/render/*.cpp
  ${CUGL_DIR}/source/scene2/*.cpp
  ${CUGL_DIR}/source/scene2/graph/*.cpp
  ${CUGL_DIR}/source/scene2/ui/*.cpp
  ${CUGL_DIR}/source/scene2/layout/*.cpp
  ${CUGL_DIR}/source/scene2/actions/*.cpp
  ${CUGL_DIR}/source/physics2/*.cpp
  ${CUGL_DIR}/source/net/*.cpp
  ${CUGL_DIR}/source/physics2/net/*.cpp
  ${CUGL_DIR}/source/external/*.c
  ${CUGL_DIR}/source/external/*.cpp)

if (ANDROID)
	list(APPEND EXTRA_INCLUDES "${ANDROID_NDK}/sources/android/cpufeatures")
endif()

# Build it all
add_library(cugl ${SOURCE_FILES})
target_link_libraries(cugl ${EXTRA_LIBS})
target_include_directories(cugl PUBLIC
                           "${PROJECT_BINARY_DIR}"
                            ${EXTRA_INCLUDES}
                           )
