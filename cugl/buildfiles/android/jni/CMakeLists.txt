# PROJECT CMAKE FILE
# This file is autogenerated by the creator script
if(POLICY CMP0077)
	set(CMAKE_POLICY_DEFAULT_CMP0077 NEW)
endif()

cmake_minimum_required(VERSION 3.10)

# set the project name and version
project(CUGL_pckg VERSION 2.2)

option(CMAKE_POSITION_INDEPENDENT_CODE "Build static libraries with -fPIC" ON)
option(CUGLPCKG_BUILD_SHARED_LIBS  "Build all components as a shared library" ON)
set(BUILD_SHARED_LIBS ${CUGLPCKG_BUILD_SHARED_LIBS})

# specify the C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)

set(COMPONENT_LIBS)
set(COMPONENT_INCLUDES)

if(SDL2PCKG_BUILD_SHARED_LIBS)
    set(cugl_pckg_export_name SDL2_pckg)
    set(cugl_pckg_install_name_infix shared)
else()
    set(cugl_pckg_export_name SDL2_pckg-static)
    set(cugl_pckg_install_name_infix static)
endif()

add_library(CUGL_pckg INTERFACE)
add_library(CUGL_pckg::${cugl_pckg_export_name} ALIAS CUGL_pckg)

# Set up the subdirectories
set(CUGL_DIR  "${PROJECT_SOURCE_DIR}/../../..")
set(SDL2_DIR  "${CUGL_DIR}/sdlapp")

# Link in cugl
add_subdirectory(cugl)
list(APPEND COMPONENT_LIBS cugl)
list(APPEND COMPONENT_INCLUDES "${CUGL_DIR}/include")

# Link in sdl2
set(SDL2PCKG_BUILD_SHARED_LIBS CUGLPCKG_BUILD_SHARED_LIBS)
add_subdirectory("${SDL2_DIR}/buildfiles/android/jni" "sdl2pckg.dir")
list(APPEND COMPONENT_LIBS SDL2_pckg::SDL2_pckg)
list(APPEND COMPONENT_INCLUDES "${SDL2_DIR}/include")

## Put it all together
target_link_libraries(CUGL_pckg INTERFACE ${COMPONENT_LIBS})

add_library(CUGL::pckg INTERFACE IMPORTED GLOBAL)
set_target_properties(CUGL::pckg PROPERTIES
    INTERFACE_LINK_LIBRARIES "SDL2_pckg"
)
if(CMAKE_VERSION VERSION_GREATER_EQUAL "3.17")
    set_target_properties(CUGL::pckg PROPERTIES
        DEPRECATION "Use CUGL_pckg::CUGL_pckg or CUGL_pckg::CUGL_pckg-static instead"
    )
endif()